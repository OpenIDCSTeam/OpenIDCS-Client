{# 虚拟机配置表单公共组件 #}
{# 使用方法: {% from 'partials/vm_config_form.html' import resource_config, network_config %} #}

{# 资源配置宏 - 一行5个输入框 #}
{# id_prefix: 'edit' 表示编辑模式(生成editCpuNum), '' 表示新建模式(生成cpuNum) #}
{% macro resource_config(id_prefix='') %}
<div class="border border-gray-200 rounded-lg p-4">
    <h4 class="text-sm font-medium text-gray-700 mb-3 flex items-center gap-2">
        <span class="iconify" data-icon="mdi:chip" data-width="18"></span>
        资源配置
    </h4>
    <div class="grid grid-cols-2 md:grid-cols-5 gap-4">
        <div>
            <label class="block text-sm font-medium text-gray-600 mb-1">CPU核心数量</label>
            <input type="number" name="cpu_num" id="{{ id_prefix ~ 'C' if id_prefix else 'c' }}puNum" min="0" max="32"
                   value="0"
                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
        </div>
        <div>
            <label class="block text-sm font-medium text-gray-600 mb-1">RAM内存(MB)</label>
            <input type="number" name="mem_num" id="{{ id_prefix ~ 'M' if id_prefix else 'm' }}emNum" min="0" step="512"
                   value="0"
                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
        </div>
        <div>
            <label class="block text-sm font-medium text-gray-600 mb-1">HDD硬盘(MB)</label>
            <input type="number" name="hdd_num" id="{{ id_prefix ~ 'H' if id_prefix else 'h' }}ddNum" min="0"
                   step="1024" value="0"
                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
        </div>
        <div>
            <label class="block text-sm font-medium text-gray-600 mb-1">GPU显卡(ID)</label>
            <input type="number" name="gpu_num" id="{{ id_prefix ~ 'G' if id_prefix else 'g' }}puNum" min="0" value="0"
                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
        </div>
        <div>
            <label class="block text-sm font-medium text-gray-600 mb-1">GPU显存(MB)</label>
            <input type="number" name="gpu_mem" id="{{ id_prefix ~ 'G' if id_prefix else 'g' }}puMem" min="0" step="256"
                   value="0"
                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
        </div>
    </div>
</div>
{% endmacro %}

{# 网络配置宏 - 一行5个输入框 #}
{% macro network_config(id_prefix='', show_nic_config=true) %}
<div class="border border-gray-200 rounded-lg p-4">
    <h4 class="text-sm font-medium text-gray-700 mb-3 flex items-center gap-2">
        <span class="iconify" data-icon="mdi:ethernet" data-width="18"></span>
        网络配置
    </h4>
    <div class="grid grid-cols-2 md:grid-cols-5 gap-4">
        <div>
            <label class="block text-sm font-medium text-gray-600 mb-1">上行带宽Mb</label>
            <input type="number" name="speed_u" id="{{ id_prefix ~ 'S' if id_prefix else 's' }}peedU" min="1"
                   value="100"
                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
        </div>
        <div>
            <label class="block text-sm font-medium text-gray-600 mb-1">下行带宽Mb</label>
            <input type="number" name="speed_d" id="{{ id_prefix ~ 'S' if id_prefix else 's' }}peedD" min="1"
                   value="100"
                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
        </div>
        <div>
            <label class="block text-sm font-medium text-gray-600 mb-1">流量限制MB</label>
            <input type="number" name="flu_num" id="{{ id_prefix ~ 'F' if id_prefix else 'f' }}luNum" min="0" value="0"
                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
        </div>
        <div>
            <label class="block text-sm font-medium text-gray-600 mb-1">Web代理数量</label>
            <input type="number" name="web_num" id="{{ id_prefix ~ 'W' if id_prefix else 'w' }}ebNum" min="0" value="0"
                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
        </div>
        <div>
            <label class="block text-sm font-medium text-gray-600 mb-1">NAT端口数量</label>
            <input type="number" name="nat_num" id="{{ id_prefix ~ 'N' if id_prefix else 'n' }}atNum" min="0" value="10"
                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
        </div>
    </div>

    {% if show_nic_config %}
    <!-- 网卡配置 -->
    <div class="mt-4 pt-4 border-t border-gray-200">
        <div class="flex items-center justify-between mb-3">
            <span class="text-sm font-medium text-gray-600">网卡列表</span>
            <button type="button" onclick="{{ 'addEditNicConfig' if id_prefix else 'addNicConfig' }}()"
                    class="text-purple-600 hover:text-purple-800 text-sm flex items-center gap-1">
                <span class="iconify" data-icon="mdi:plus" data-width="16"></span>
                添加网卡
            </button>
        </div>
        <div id="{{ id_prefix ~ 'N' if id_prefix else 'n' }}icConfigs" class="space-y-2">
            <!-- 动态添加网卡配置 -->
        </div>
    </div>
    {% endif %}
</div>
{% endmacro %}
